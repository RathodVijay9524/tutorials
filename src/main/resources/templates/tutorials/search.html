<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{tutorials/layout}">

<head>
    <title th:text="'Search: ' + ${query} + ' - JavaMaster'">Search Results</title>
</head>

<body>
    <div layout:fragment="content">
        <div class="mb-4">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/tutorials}"
                            class="text-primary text-decoration-none">Home</a></li>
                    <li class="breadcrumb-item active text-light" aria-current="page">Search Results</li>
                </ol>
            </nav>
            <h1 class="display-6 fw-bold">
                <i class="fas fa-search text-primary me-2"></i> Results for "<span th:text="${query}"
                    class="text-primary">query</span>"
            </h1>
            <p class="text-muted" th:text="${tutorials.totalElements} + ' tutorials found.'">0 tutorials found.</p>
        </div>

        <div class="row g-4">
            <div th:each="tutorial : ${tutorials}" class="col-md-6 col-lg-4">
                <div class="premium-card h-100 p-4">
                    <div class="mb-3 d-flex justify-content-between align-items-start">
                        <span class="badge bg-primary bg-opacity-10 text-primary"
                            th:text="${tutorial.categoryName}">Category</span>
                        <span class="text-muted small"><i class="far fa-star me-1 text-warning"></i> 4.5</span>
                    </div>
                    <h3 class="h5 mb-2" th:text="${tutorial.title}">Tutorial Title</h3>
                    <p class="text-muted small mb-4" th:text="${#strings.abbreviate(tutorial.content, 100)}">
                        Tutorial description snippet...
                    </p>
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                        <div class="d-flex align-items-center gap-2">
                            <div class="rounded-circle bg-dark p-1"
                                style="width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user text-muted" style="font-size: 0.7rem;"></i>
                            </div>
                            <span class="text-muted x-small" style="font-size: 0.75rem;"
                                th:text="${tutorial.authorName}">Author</span>
                        </div>
                        <a th:href="@{/tutorials/view/{slug}(slug=${tutorial.slug})}"
                            class="btn btn-outline-primary btn-sm rounded-pill px-3">
                            Read More
                        </a>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div th:if="${tutorials.isEmpty()}" class="col-12 text-center py-5">
                <div class="p-5 premium-card glass-effect">
                    <i class="fas fa-search-minus fa-4x text-muted mb-3"></i>
                    <h2 class="h4 text-light">No results found</h2>
                    <p class="text-muted">We couldn't find any tutorials matching your search. Try different keywords or
                        browse our categories.</p>
                    <a th:href="@{/tutorials}" class="btn btn-premium mt-3">
                        <i class="fas fa-home me-2"></i>Back to Home
                    </a>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div th:if="${tutorials.totalPages > 1}" class="d-flex justify-content-center mt-5">
            <nav aria-label="Search results pagination">
                <ul class="pagination">
                    <li class="page-item" th:classappend="${tutorials.first ? 'disabled' : ''}">
                        <a class="page-link bg-dark border-white border-opacity-10 text-light"
                            th:href="@{/tutorials/search(q=${query}, page=${tutorials.number - 1})}">
                            <i class="fas fa-chevron-left"></i>
                        </a>
                    </li>
                    <li class="page-item" th:each="i : ${#numbers.sequence(0, tutorials.totalPages - 1)}"
                        th:classappend="${i == tutorials.number ? 'active' : ''}">
                        <a class="page-link bg-dark border-white border-opacity-10 text-light"
                            th:href="@{/tutorials/search(q=${query}, page=${i})}" th:text="${i + 1}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${tutorials.last ? 'disabled' : ''}">
                        <a class="page-link bg-dark border-white border-opacity-10 text-light"
                            th:href="@{/tutorials/search(q=${query}, page=${tutorials.number + 1})}">
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</body>

</html>